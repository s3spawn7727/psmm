$("#category").on("change", () => {
	let a = $("#category option:selected").val();
	"" == a || (resetFields(), $("#service").empty().select2({
		data: services[a] ?? [{
			id: "",
			text: msg.noResult
		}],
		formatSelection: a => a.price,
		placeholder: "Select Service"
	}), service = $("#service option"), $("#service").val((service[1] ?? service[0]).value).trigger("change"))
}), $("#service").on("change", () => resetFields($("#service").select2("data")[0])), $("#min_max").on("keyup change", () => {
	var a = $("#service").select2("data")[0].price;
	a *= $("#min_max").val(), $("#order_total").text(a.toFixed(4) + 0)
}), $("#comments").on("keyup", function() {
	var a = $(this).val(),
		b = a.split("\n"),
		b = b.filter(a => a);
	$(this).val(a), $("#min_max").val(b.length).trigger("change")
});

function resetFields(a) {
	$(".verify").attr("disabled", !1), $("[name=\"link\"]").attr("readonly", !1), $("#invalid_link").hide();
	var b = null != a;
	$("#desc").html(b ? a.desc : ""), $("#avg_time").text(b ? a.time : ""), $("#min").text(b ? a.min : ""), $("#max").text(b ? a.max : ""), $("#min_max").attr("min", b ? a.min : ""), $("#min_max").val(b ? a.min : 0), $("#min_max").attr("max", b ? a.max : ""), $("[name=\"verified\"]").val(1), $("#order_total").text("0.00"), b && "custom_comments" == a.type ? ($("#comments").show().attr("required", !0), $("#min_max").attr("readonly", !0)) : b && "poll" == a.type ? ($("#answer").show().attr("required", !0), $("#min_max").attr("readonly", !1)) : ($(".customs").hide().attr("required", !1), $("#min_max").attr("readonly", !1));
	if(b&&a.s_type==="twitch_bot:messages"){
		if(a.msg_by==="user"){
			$("#bot_msglist").html("").show();
		}else{
			$("#bot_msglist").hide();
		}
		$("#quantLabel").html("Enter chatbot quantity").show();
	}else if(b&&a.s_type==="twitch_bot:messages+views"){
		if(a.msg_by==="user"){
			$("#bot_msglist").html("").show();
		}else{
			$("#bot_msglist").hide();
		}
		$("#quantLabel").html("Enter viewers quantity").show();
	}else{
		$("#bot_msglist").hide();
		$("#quantLabel").html("").hide();
	}
	$("#min_max").trigger("change")
}